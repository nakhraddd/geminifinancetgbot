"""
Системные промпты для различных сценариев
"""

from .config import AGENT_SYSTEM_PROMPT

def get_salary_calculation_prompt(user_query: str) -> str:
    """
    Промпт для расчета зарплаты
    """
    return f"""{AGENT_SYSTEM_PROMPT}

ЗАДАЧА: Рассчитать заработную плату на руки

Вопрос пользователя: {user_query}

ИНСТРУКЦИЯ ПО РАСЧЕТУ:
1. Определи брутто-зарплату из вопроса
2. Рассчитай ОПВ = брутто × 0.10
3. Рассчитай ВОСМС = брутто × 0.02
4. Определи налогооблагаемый доход:
   - Если есть вычеты на иждивенцев: налогооблагаемый = брутто - ОПВ - МЗП×1.4 - (количество_иждивенцев × МЗП×1.4)
   - Если нет иждивенцев: налогооблагаемый = брутто - ОПВ - МЗП×1.4
5. Рассчитай ИПН:
   - Если налогооблагаемый > 0: ИПН = налогооблагаемый × 0.10
   - Если налогооблагаемый ≤ 0: ИПН = 0
6. Рассчитай нетто = брутто - ОПВ - ВОСМС - ИПН

ДОПОЛНИТЕЛЬНО укажи обязательства работодателя:
- СО (социальные отчисления) = брутто × 0.035
- СН (социальный налог) = (брутто - СО) × 0.095

ФОРМАТ ОТВЕТА:
Структурируй ответ так:
1. Краткий итог (сумма на руки)
2. Детальный расчет с формулами
3. Обязательства работодателя
4. Если есть неясности в вопросе - попроси уточнения

Будь точным в расчетах!
"""

def get_vat_consultation_prompt(user_query: str) -> str:
    """
    Промпт для консультации по НДС
    """
    return f"""{AGENT_SYSTEM_PROMPT}

ЗАДАЧА: Консультация по вычету НДС

Вопрос пользователя: {user_query}

ИНСТРУКЦИЯ:
1. Определи тип расхода из вопроса
2. Проверь соответствие условиям для вычета:
   - Расход связан с деятельностью облагаемой НДС?
   - Есть правильно оформленный ЭСФ?
   - Расход не входит в исключения (ст. 256 НК РК)?
3. Дай четкий ответ: можно/нельзя принять к вычету
4. Укажи статью НК РК
5. Перечисли необходимые документы
6. Предупреди о рисках если есть

ОСОБЫЕ СЛУЧАИ (нельзя вычет):
- Представительские расходы
- Расходы по безвозмездной передаче
- Личные расходы учредителей
- Расходы по необлагаемым операциям

ФОРМАТ ОТВЕТА:
1. Краткий вывод (можно/нельзя/зависит)
2. Обоснование со ссылкой на НК РК
3. Список необходимых документов
4. Предупреждения/условия (если есть)

Если случай неоднозначный - рекомендуй проконсультироваться с налоговым консультантом!
"""

def get_general_prompt(user_query: str) -> str:
    """
    Общий промпт для других вопросов
    """
    return f"""{AGENT_SYSTEM_PROMPT}

Вопрос пользователя: {user_query}

Ответь профессионально, точно и понятно. Если вопрос требует расчетов - покажи их пошагово.
"""
